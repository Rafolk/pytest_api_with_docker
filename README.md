# Проект для автоматического тестирования API с помощью PyTest и Docker

Всем привет, это мой домашний проект по тестированию **API** с помощью **PyTest**, с запуском тестов и всех сервисов 
в контейнерах **Docker**, без установки дополинтельного ПО. В рамках проекта доступны:
1. Запуск одной командой с применением **Docker Compose** (в числе прочего используется `healthcheck` и `depends_on` 
   для запуска тестов в контейнере только **после** полного запуска **API** и **БД**);
1. Отчёты **Allure**;
1. **pgAdmin** в контейнере и сама **БД** (в папке **DemoTestDatabase** есть примеры обращения к базе данных для тестов).

Пока проект в процессе разработки. Начать мне помог пройденный курс на **Stepik.ru** - *Тестирование ПО: Автоматизация и 
Программирование на 
Python. API* (сертификат можно просмотреть [тут](https://stepik.org/cert/2145502)). 

**Однако**, уже сейчас можно запустить и посмотреть на работу основных тестов. Для запуска нужно:
1. Установить **Docker** и запустить сервисы, а так же сами тесты в контейнерах командой из корня проекта (все 
   доступные 
   команды 
   можно просмотреть, выполнив `./start.sh --help`):
    ```sh
    ./start.sh --start
    ```
   (за тестовое приложение спасибо *Mark Winteringham*, ссылка на [оригинальный проект](https://github.com/mwinteringham/restful-booker), локально документацию после запуска контейнера можно посмотреть [тут](http://localhost:3001/apidoc/index.html));
   
1. Отчёты **Allure** можно посмотреть по [ссылке](http://localhost:5050/allure-docker-service/projects/default/reports/latest/index.html)
(за сервисы **Allure** в контейнере спасибо **Frank Escobar**, ссылка на [оригинальный проект](https://github.com/fescobar/allure-docker-service-examples));

1. **pgAdmin** для проверки не требует установки, т.к. запускается в контейнере, доступен по [ссылке](http://localhost:5550/login) (изначально БД 
   **пустая**). Порядок подключения:
   2. Перейти по ссылке и авторизоваться, логин/пароль - `postgres@admin.com`/`mysecretpassword`;
   3. Создать сервер, указать любое имя;
   4. Параметры соединения:
      5. Имя/адрес сервера - `postgres-db`;
      6. Порт - `5432`;
      7. Пароль - `mysecretpassword` (логин по умолчанию - `postgres`).

Так же при локальном запуске (требуется **Python** не ниже версии **3.10**) доступно разделение на позитивные и негативные тесты с помощью маркировки, 
например:
 * `python -m pytest -m positive --alluredir=allure-results` - запуск только **позитивных** тестов;
 * `python -m pytest -m negative --alluredir=allure-results` - запуск только **негативных** тестов.

# Доработки
В ближайшем будущем планирую:
1. Полностью покрыть тестами выбранный **API**;
2. Доработать отчёты в **Allure**;
3. А так же реализовать возможность передачи параметров запуска тестов в контейнере.
